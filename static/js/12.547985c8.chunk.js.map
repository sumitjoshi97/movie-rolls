{"version":3,"sources":["views/ItemDetail/index.jsx"],"names":["ItemDetail","state","currentType","fetchItem","props","type","itemId","match","params","fetchQueryItem","fetchQueryItemDetails","fetchQueryItemVideos","fetchSimilarItems","renderHero","item","key","id","pageId","title","poster","poster_path","backdrop","backdrop_path","rating","vote_average","summary","overview","adult","year","release_date","split","name","first_air_date","renderLists","similar","results","length","items","className","credits","cast","videos","handleNav","itemType","setState","this","prevProps","prevState","setItemClear","options","Component","connect","current","dispatch","actions","withRouter"],"mappings":"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","file":"static/js/12.547985c8.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\n\r\n// import react components\r\nimport Hero from '../../components/Hero'\r\nimport Nav from '../../components/Nav'\r\nimport List from '../../components/List'\r\n\r\n//import redux actions\r\nimport * as actions from '../../actions'\r\n\r\nimport './style.scss'\r\n\r\nexport class ItemDetail extends Component {\r\n  static propTypes = {\r\n    type: PropTypes.string,\r\n    item: PropTypes.object,\r\n    credits: PropTypes.object,\r\n    videos: PropTypes.object,\r\n    similar: PropTypes.object,\r\n    fetchQueryItem: PropTypes.func.isRequired,\r\n    fetchQueryItemDetails: PropTypes.func.isRequired,\r\n    fetchQueryItemVideos: PropTypes.func.isRequired,\r\n    fetchSimilarItems: PropTypes.func.isRequired,\r\n    setItemClear: PropTypes.func.isRequired,\r\n  }\r\n\r\n  state = {\r\n    currentType: 'overview',\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchItem()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.match.params.itemId !== this.props.match.params.itemId) {\r\n      this.fetchItem()\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.props.setItemClear()\r\n  }\r\n\r\n  fetchItem = () => {\r\n    const { type, match } = this.props\r\n    const itemId = match.params.itemId\r\n\r\n    this.props.fetchQueryItem(type, itemId)\r\n    this.props.fetchQueryItemDetails(type, itemId)\r\n    this.props.fetchQueryItemVideos(type, itemId)\r\n    this.props.fetchSimilarItems(type, itemId)\r\n  }\r\n\r\n  renderHero = () => {\r\n    const { item, type } = this.props\r\n\r\n    if (item) {\r\n      if (type === 'movie') {\r\n        return (\r\n          <Hero\r\n            key={item.id}\r\n            pageId={item.id}\r\n            title={item.title}\r\n            poster={item.poster_path}\r\n            backdrop={item.backdrop_path}\r\n            rating={item.vote_average}\r\n            type={type}\r\n            summary={item.overview}\r\n            adult={item.adult}\r\n            year={item.release_date.split('-')[0] || ''}\r\n          />\r\n        )\r\n      } else {\r\n        return (\r\n          <Hero\r\n            key={item.id}\r\n            pageId={item.id}\r\n            title={item.name}\r\n            poster={item.poster_path}\r\n            backdrop={item.backdrop_path}\r\n            rating={item.vote_average}\r\n            type={type}\r\n            summary={item.overview}\r\n            year={item.first_air_date.split('-')[0] || ''}\r\n          />\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  renderLists = () => {\r\n    if (this.state.currentType === 'overview') {\r\n      if (this.props.credits) {\r\n        return (\r\n          <>\r\n            <List type='cast' name='Cast' items={this.props.credits.cast} />\r\n            {this.props.videos &&\r\n              (this.props.videos.results.length > 0 ? (\r\n                <List\r\n                  type='video'\r\n                  name='videos'\r\n                  items={this.props.videos.results}\r\n                />\r\n              ) : null)}\r\n          </>\r\n        )\r\n      }\r\n    } else {\r\n      return this.props.similar.results.length > 0 ? (\r\n        <List\r\n          type={this.props.type}\r\n          name='Similar'\r\n          items={this.props.similar.results}\r\n        />\r\n      ) : (\r\n        <h3 className='sorry-text'>\r\n          Sorry, we can't find anything looking similar\r\n        </h3>\r\n      )\r\n    }\r\n  }\r\n\r\n  handleNav = itemType => {\r\n    this.setState({\r\n      currentType: itemType,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='item-details'>\r\n        <div className='item-details__hero'>\r\n          {this.renderHero()}\r\n          <Nav\r\n            handleNav={this.handleNav}\r\n            options={[\r\n              { type: 'overview', name: 'overview' },\r\n              { type: 'similar', name: 'more like this' },\r\n            ]}\r\n          />\r\n        </div>\r\n        <div className='item-details__lists'>{this.renderLists()}</div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  type: state.item.type,\r\n  item: state.item.current,\r\n  credits: state.item.credits,\r\n  videos: state.item.videos,\r\n  similar: state.item.similar,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  fetchQueryItem: (type, itemId) =>\r\n    dispatch(actions.getQueryItem(type, itemId)),\r\n\r\n  fetchQueryItemDetails: (type, itemId) =>\r\n    dispatch(actions.getQueryItemCredits(type, itemId)),\r\n\r\n  fetchQueryItemVideos: (type, itemId) =>\r\n    dispatch(actions.getQueryItemVideos(type, itemId)),\r\n\r\n  fetchSimilarItems: (type, itemId) =>\r\n    dispatch(actions.getSimilarItems(type, itemId)),\r\n\r\n  setItemClear: () => dispatch(actions.setItemClear()),\r\n})\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withRouter(ItemDetail))\r\n"],"sourceRoot":""}